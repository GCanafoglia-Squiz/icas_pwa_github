{"version":3,"sources":["source/js/global.js","source/modules/article/js/global.js","source/modules/header/js/global.js","source/modules/ios_overlay/js/global.js","source/modules/record-list/js/global.js","source/modules/sw_messages/js/global.js","source/modules/topics/js/global.js"],"names":["$","removeClass","addClass","document","ready","length","on","e","preventDefault","history","window","go","location","href","url","attr","navigator","onLine","ajax","type","done","data","status","options","Array","js_api","Squiz_Matrix_API","dataType","user","getArticles","fail","xhr","errorThrown","html","console","log","$this","hasClass","actualArticle","removeFromRecord","addToRecord","assetId","articleId","button","actualArticlesString","acquireLock","remArticleMetadata","object","getMetadata","storeToArrayToRemove","actualArticles","split","indexOf","i","splice","join","setMetadata","releaseLockListArticle","releaseLock","setNonActive","setArticleMetadata","alreadysaved","toSaveArticles","releaseLockArticle","setActive","storeToArray","each","articleid","toString","toggleClass","isMobile","iOS","userAgent","match","css","setIos","overlay","setAssetMetadata","removeOverlay","parents","removeButton","remove","addEventListener","getElementsByClassName","style","marginTop","opacity","getCategories","destination","toAdd","push","setCategories","arrayCategories","category","urlDestination","setStringCategories","redirect"],"mappings":"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","file":"global.js","sourcesContent":["/*global jQuery*/\n/**\n * {{name}}\n * Global JS\n *\n * version: {{version}}\n * file:    {{file}}\n * author:  Squiz Australia\n * change log:\n *     {{date}} - First revision\n */\n\n/*\n * Table of Contents\n *\n * - Global\n * - Modules\n{{toc}}\n */\n'use strict';\n/*\n--------------------\nGlobal\n--------------------\n*/\n//  Declare JS Enabled.\n$('body').removeClass('no-js').addClass('js-enabled');\n\n\n/*\n--------------------\nModules\n--------------------\n*/\n","// This part in Matrix Start\n//\n// var user = 431889;\n// let actualArticles = [];\n// let toSaveArticles = [];\n//\n// This part in Matrix End\n\n$(document).ready(function () {\n  if ($('#referer_from_sw').length > 0 ) {\n    $('#referer_from_sw').on('click', function(e){\n      e.preventDefault();\n      if(history.length > 1) {\n        // console.log(history.length);\n        window.history.go(-1);\n      } else {\n        // console.log(history.length + \" back home\");\n        window.location.href = 'https://app.icas.com/home';\n      }\n    })\n  }\n\n  if ($('.main_article').length > 0 ) {\n    let url = $('.main_article').attr('data-ajaxurl');\n    if (navigator.onLine) {\n      $.ajax({\n        url: \"https://app.icas.com/_designs/ajax-content/token\" ,\n        type: \"GET\",\n      }).done(function (data, status) {\n        // console.log('token');\n        $('#token').attr('value',$(data).attr('value') );\n        var options = new Array();\n        options['key'] = '9400745924';\n        js_api = new Squiz_Matrix_API(options);\n        $.ajax({\n          dataType: 'json',\n          url: url,\n          type: \"GET\",\n        }).done(function (data, status) {\n          // console.log(\"data received = \" + data[\"userid\"]);\n          user = data[\"userid\"];\n          // console.log(\"onLoaduser: \" + status);\n          getArticles(user);\n        }).fail(function (xhr, status, errorThrown) {\n          $('.socialicons .button').addClass('buttonerror').html('Limited functionalities');\n          console.log(\"Error: \" + errorThrown);\n          console.log(\"Status: \" + status);\n        });\n\n      }).fail(function (xhr, status, errorThrown) {\n        console.log('token error');\n        console.log(\"Error: \" + errorThrown);\n        console.log(\"Status: \" + status);\n      });\n\n    }\n\n    $('.socialicons .button').on('click', function (e) {\n      e.preventDefault();\n      let $this = $(this);\n      if (navigator.onLine) {\n        if ($this.hasClass('active')) {\n          let actualArticle = $this.attr('data-articleid');\n          removeFromRecord(user, actualArticle, $this);\n        } else {\n          let actualArticle = $this.attr('data-articleid') + ';';\n          addToRecord(user, actualArticle, $this);\n        }\n      }\n    });\n\n  }\n});\n\n// remove articleId from metadata\nfunction removeFromRecord(assetId, articleId, button) {\n  let actualArticlesString;\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\": 0,\n    \"force_acquire\": true,\n    \"dataCallback\": remArticleMetadata\n  });\n\n  function remArticleMetadata(object) {\n    if (object[0][\"warning\"] || object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    } else {\n      js_api.getMetadata({\n        \"asset_id\": assetId,\n        \"dataCallback\": storeToArrayToRemove\n      });\n    }\n  }\n\n  function storeToArrayToRemove(object) {\n    $('.main_article').attr('data-articlelist', object[\"Saved.Record\"]);\n    actualArticles = object[\"Saved.Record\"].split(';');\n    if (actualArticles.indexOf(articleId) != -1) {\n      for (var i in actualArticles) {\n        if (actualArticles[i] == articleId) {\n          actualArticles.splice(i, 1);\n          break;\n        }\n      }\n      actualArticlesString = actualArticles.join(';');\n      js_api.setMetadata({\n        \"asset_id\": assetId,\n        \"field_id\": 451003,\n        \"field_val\": actualArticlesString,\n        \"dataCallback\": function () {\n          releaseLockListArticle(assetId);\n        }\n      });\n    }\n  }\n\n  function releaseLockListArticle(assetId) {\n    js_api.releaseLock({\n      \"asset_id\": assetId,\n      \"dataCallback\": function () {\n        setNonActive(button);\n      }\n    });\n  }\n\n  function setNonActive(button) {\n    $('.main_article').attr('data-articlelist', actualArticlesString);\n    button.removeClass('active').html('Add to Learning Record');\n  }\n}\n\n\n//add articleId to metadata\nfunction addToRecord(assetId, articleId, button) {\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\": 0,\n    \"force_acquire\": true,\n    \"dataCallback\": setArticleMetadata\n  });\n\n  function setArticleMetadata(object) {\n    if (object[0][\"warning\"] || object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    } else {\n      let alreadysaved = $('.main_article').attr('data-articlelist');\n      toSaveArticles = alreadysaved + articleId;\n      $('.main_article').attr('data-articlelist', toSaveArticles);\n      js_api.setMetadata({\n        \"asset_id\": assetId,\n        \"field_id\": 451003,\n        \"field_val\": toSaveArticles,\n        \"dataCallback\": function () {\n          releaseLockArticle(assetId);\n        }\n      });\n    }\n  }\n\n  function releaseLockArticle(assetId) {\n    js_api.releaseLock({\n      \"asset_id\": assetId,\n      \"dataCallback\": function () {\n        setActive(button);\n      }\n    });\n  }\n\n  function setActive(button) {\n    button.addClass('active').html('Added to Learning Record');\n  }\n}\n\n//get metadata and apply active class accordingly\nfunction getArticles(assetId) {\n  js_api.getMetadata({\n    \"asset_id\": assetId,\n    \"dataCallback\": storeToArray\n  });\n\n  function storeToArray(object) {\n    if (object[\"Saved.Record\"]) {\n      $('.main_article').attr('data-articlelist', object[\"Saved.Record\"]);\n      actualArticles = object[\"Saved.Record\"].split(';');\n      $('.socialicons .button').each(function () {\n        let $this = $(this);\n        let articleid = $this.attr('data-articleid').toString();\n        if (actualArticles.indexOf(articleid) != -1) {\n          $this.addClass('active').html('Added to Learning Record');\n        }\n      });\n    }\n  }\n}","$(document).ready(function () {\n  $('.menutrigger').on('click', function() {\n    $('.slide_in_menu').toggleClass('slide_in_menu_open');\n  })\n});","var isMobile = {\n  iOS: function () {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n  }\n};\n\n\n$(document).ready(function () {\n  if ($('.ios_overlay').length > 0) {\n    if (isMobile.iOS()) {\n      $('.ios_overlay').css({'visibility': 'visible', 'opacity': '1'});\n    }\n    $('.ios_overlay').on('click', function (e) {\n      e.preventDefault();\n      let $this = $(this);\n      if (navigator.onLine) {\n        setIos(user, $this)\n      } else {\n        $this.css({'visibility': 'hidden', 'opacity': '0'});\n      }\n    })\n  }\n});\n\nfunction setIos(assetId, overlay) {\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\": 0,\n    \"force_acquire\": true,\n    \"dataCallback\": setAssetMetadata\n  });\n\n  function setAssetMetadata(object) {\n    if (object[0][\"warning\"] || object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    } else {\n      js_api.setMetadata({\n        \"asset_id\": assetId,\n        \"field_id\": 453599,\n        \"field_val\": \"no\",\n        \"dataCallback\": function () {\n          releaseLock(assetId);\n        }\n      });\n    }\n  }\n\n  function releaseLock(assetId) {\n    js_api.releaseLock({\n      \"asset_id\": assetId,\n      \"dataCallback\": removeOverlay\n    });\n  }\n\n  function removeOverlay() {\n    overlay.css({'visibility': 'hidden', 'opacity': '0'});\n  }\n}","$(document).ready(function () {\n  $('.articles_list--element .rmv_wrapper').on('click', function (e) {\n    e.preventDefault();\n    let $this = $(this);\n    let actualArticle = $this.attr('data-articleid');\n    let button = $this.parents('li');\n    if (navigator.onLine) {\n      removeButton(user, actualArticle, button);\n    }\n  })\n});\n\nfunction removeButton(assetId, articleId, button) {\n  let actualArticlesString;\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\":0,\n    \"force_acquire\":true,\n    \"dataCallback\": remArticleMetadata\n  });\n  function remArticleMetadata(object) {\n    if (  object[0][\"warning\"] ||  object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    }  else {\n      js_api.getMetadata({\n        \"asset_id\": assetId,\n        \"dataCallback\": storeToArrayToRemove\n      });\n    }\n  }\n  function storeToArrayToRemove(object) {\n    $('.record_list').attr('data-articlelist', object[\"Saved.Record\"]);\n    actualArticles = object[\"Saved.Record\"].split(';');\n    if (actualArticles.indexOf(articleId) != -1) {\n      for(var i in actualArticles){\n        if(actualArticles[i]== articleId ){\n          actualArticles.splice(i,1);\n          break;\n        }\n      }\n      actualArticlesString = actualArticles.join(';');\n      js_api.setMetadata({\n        \"asset_id\":assetId,\n        \"field_id\":451003,\n        \"field_val\": actualArticlesString ,\n        \"dataCallback\":function() {\n          releaseLockListArticle(assetId);\n        }\n      });\n    }\n  }\n  function releaseLockListArticle(assetId) {\n    js_api.releaseLock({\n      \"asset_id\":assetId,\n      \"dataCallback\":function() {\n        setNonActive(button);\n      }\n    });\n  }\n  function setNonActive(button) {\n    $('.record_list').attr('data-articlelist',actualArticlesString);\n    button.remove();\n  }\n}","window.addEventListener('offline', function (e) {\n  if ($('.articlewrapper').length >0 ) {\n    $('.app_area').css('margin-top','100px');\n  } else {\n    $('.app_area').css('margin-top','68px');\n  }\n  $('.sw_message').css('opacity','1');\n}, false);\n\nwindow.addEventListener('online', function (e) {\n  $('.app_area').css('margin-top','0');\n  $('.sw_message').css('opacity','0');\n}, false);\n\n\nwindow.addEventListener('load', function(e) {\n  if (navigator.onLine) {\n    document.getElementsByClassName('app_area')[0].style.marginTop = \"0\";\n    document.getElementsByClassName('sw_message')[0].style.opacity = \"0\";\n\n  } else {\n    if (document.getElementsByClassName('articlewrapper').length > 0 ) {\n      document.getElementsByClassName('app_area')[0].style.marginTop = \"100px\";\n    } else {\n      document.getElementsByClassName('app_area')[0].style.marginTop = \"68px\";\n    }\n    document.getElementsByClassName('sw_message')[0].style.opacity = \"1\";\n  }\n}, false);","// this part is in Matrix start\n// this part will be in the pain layout of the page\n//\n// var options = new Array();\n// options['key'] = '9400745924';\n// var js_api = new Squiz_Matrix_API(options);\n// var user = 448785 ; //user ID\n// var arrayCategories = [];\n// var toAdd = [];\n//\n//\n// this part is in Matrix end\n\n\n$(document).ready(function () {\n  if ($('.topics').length > 0) {\n\n    //apply active class to subscribed categories\n    if (navigator.onLine) {\n      getCategories(user);\n    }\n    // add/remove category on Click\n    $('ul.topics-list .topics-list__item').on('click', function (e) {\n      e.preventDefault();\n      let $this = $(this);\n      $this.toggleClass('active');\n    });\n\n    //submit selections\n    $('.nextButton a').on('click', function (e) {\n      e.preventDefault();\n      let $this = $(this);\n      let destination = $this.attr('href');\n      if (navigator.onLine) {\n        $('ul.topics-list .topics-list__item').each(function () {\n          if ($(this).hasClass('active')) {\n            toAdd.push($(this).data('subscription'));\n          }\n        });\n        setCategories(user, destination);\n      } else {\n        window.location.href = destination;\n      }\n\n    });\n  }\n});\n\n//get metadata and apply active class accordingly\nfunction getCategories(assetId) {\n  js_api.getMetadata({\n    \"asset_id\": assetId,\n    \"dataCallback\": storeToArray\n  });\n\n  function storeToArray(object) {\n    if (object[\"Selected.Topics.Nospace\"]) {\n      arrayCategories = object[\"Selected.Topics.Nospace\"].split('; ');\n      $('ul.topics-list .topics-list__item').each(function () {\n        let $this = $(this);\n        let category = $this.data('subscription').toString();\n        if (arrayCategories.indexOf(category) != -1) {\n          $this.addClass('active');\n        }\n      });\n    }\n  }\n}\n\n//acquire lock, save metadata, relase lock\nfunction setCategories(assetId, urlDestination) {\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\": 0,\n    \"force_acquire\": true,\n    \"dataCallback\": setAssetMetadata\n  });\n\n  function setAssetMetadata(object) {\n    console.log('seta metadata. object:');\n    console.log(object);\n    if (/* object[0][\"warning\"] || */ object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    } else {\n      var setStringCategories = toAdd.join('; ');\n      js_api.setMetadata({\n        \"asset_id\": assetId,\n        \"field_id\": 455271,\n        \"field_val\": setStringCategories,\n        \"dataCallback\": function () {\n          releaseLock(assetId);\n        }\n      });\n    }\n  }\n\n  function releaseLock(assetId) {\n    js_api.releaseLock({\n      \"asset_id\": assetId,\n      \"dataCallback\": redirect\n    });\n  }\n\n  function redirect() {\n    window.location.href = urlDestination;\n  }\n}"]}