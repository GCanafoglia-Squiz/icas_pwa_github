{"version":3,"sources":["source/js/global.js","source/modules/article/js/global.js","source/modules/header/js/global.js","source/modules/topics/js/global.js"],"names":["$","removeClass","addClass","document","ready","length","getArticles","user","on","e","preventDefault","console","log","$this","hasClass","actualArticle","attr","removeFromRecord","addToRecord","assetId","articleId","button","actualArticlesString","js_api","acquireLock","remArticleMetadata","object","getMetadata","storeToArrayToRemove","actualArticles","split","indexOf","i","splice","join","setMetadata","releaseLockListArticle","releaseLock","setNonActive","setArticleMetadata","alreadysaved","toSaveArticles","releaseLockArticle","setActive","storeToArray","each","articleid","toString","toggleClass","getCategories","destination","toAdd","push","data","setCategories","arrayCategories","category","urlDestination","setAssetMetadata","setStringCategories","redirect","window","location","href"],"mappings":"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","file":"global.js","sourcesContent":["/*global jQuery*/\n/**\n * {{name}}\n * Global JS\n *\n * version: {{version}}\n * file:    {{file}}\n * author:  Squiz Australia\n * change log:\n *     {{date}} - First revision\n */\n\n/*\n * Table of Contents\n *\n * - Global\n * - Modules\n{{toc}}\n */\n'use strict';\n/*\n--------------------\nGlobal\n--------------------\n*/\n//  Declare JS Enabled.\n$('body').removeClass('no-js').addClass('js-enabled');\n\n\n/*\n--------------------\nModules\n--------------------\n*/\n","// This part in Matrix Start\n//\n// var user = 431889;\n// let actualArticles = [];\n// let toSaveArticles = [];\n//\n// This part in Matrix End\n\n$(document).ready(function () {\n  if ($('.main_article').length > 0) {\n\n    getArticles(user);\n\n    $('.socialicons .button').on('click', function(e){\n      e.preventDefault();\n      console.log('click');\n      let $this = $(this);\n      if ( $this.hasClass('active') ){\n        console.log('active');\n        let actualArticle = $this.attr('data-articleid');\n        console.log('actual article = ' + actualArticle);\n        removeFromRecord(user, actualArticle, $this);\n      } else {\n        console.log('not active');\n        let actualArticle = $this.attr('data-articleid') + ';';\n        console.log('actual article = ' + actualArticle);\n        addToRecord(user, actualArticle, $this);\n      }\n    });\n\n  }\n});\n//remove articleId from metadata\nfunction removeFromRecord(assetId, articleId, button) {\n  let actualArticlesString;\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\":0,\n    \"force_acquire\":true,\n    \"dataCallback\": remArticleMetadata\n  });\n  function remArticleMetadata(object) {\n    console.log('remove metadata. object:');\n    console.log(object);\n    if (  object[0][\"warning\"] ||  object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    }  else {\n      js_api.getMetadata({\n        \"asset_id\": assetId,\n        \"dataCallback\": storeToArrayToRemove\n      });\n    }\n  }\n  function storeToArrayToRemove(object) {\n    $('.main_article').attr('data-articlelist', object[\"Saved.Record\"]);\n    actualArticles = object[\"Saved.Record\"].split(';');\n    if (actualArticles.indexOf(articleId) != -1) {\n      console.log('is in');\n      for(var i in actualArticles){\n        if(actualArticles[i]== articleId ){\n          actualArticles.splice(i,1);\n          break;\n        }\n      }\n      actualArticlesString = actualArticles.join(';');\n      js_api.setMetadata({\n        \"asset_id\":assetId,\n        \"field_id\":451003,\n        \"field_val\": actualArticlesString ,\n        \"dataCallback\":function() {\n          releaseLockListArticle(assetId);\n        }\n      });\n    }\n  }\n  function releaseLockListArticle(assetId) {\n    js_api.releaseLock({\n      \"asset_id\":assetId,\n      \"dataCallback\":function() {\n        setNonActive(button);\n      }\n    });\n  }\n  function setNonActive(button) {\n    $('.main_article').attr('data-articlelist',actualArticlesString);\n    button.removeClass('active');\n  }\n}\n\n\n//add articleId to metadata\nfunction addToRecord(assetId, articleId, button) {\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\":0,\n    \"force_acquire\":true,\n    \"dataCallback\": setArticleMetadata\n  });\n  function setArticleMetadata(object) {\n    console.log('seta metadata. object:');\n    console.log(object);\n    if (  object[0][\"warning\"] ||  object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    }  else {\n      let alreadysaved = $('.main_article').attr('data-articlelist');\n      toSaveArticles = alreadysaved + articleId;\n      $('.main_article').attr('data-articlelist', toSaveArticles);\n      console.log(toSaveArticles);\n      js_api.setMetadata({\n        \"asset_id\":assetId,\n        \"field_id\":451003,\n        \"field_val\": toSaveArticles ,\n        \"dataCallback\":function() {\n          releaseLockArticle(assetId);\n        }\n      });\n    }\n  }\n  function releaseLockArticle(assetId) {\n    js_api.releaseLock({\n      \"asset_id\":assetId,\n      \"dataCallback\":function() {\n        setActive(button);\n      }\n    });\n  }\n  function setActive(button) {\n    button.addClass('active');\n  }\n}\n\n//get metadata and apply active class accordingly\nfunction getArticles(assetId) {\n  js_api.getMetadata({\n    \"asset_id\": assetId,\n    \"dataCallback\": storeToArray\n  });\n  function storeToArray(object) {\n    if(object[\"Saved.Record\"]  ) {\n      //   console.log('article before split: ' + object[\"Saved.Record\"]);\n      $('.main_article').attr('data-articlelist', object[\"Saved.Record\"]);\n      actualArticles = object[\"Saved.Record\"].split(';');\n      //   console.log('article after split: ' + actualArticles);\n      $('.socialicons .button').each(function () {\n        let $this = $(this);\n        let articleid = $this.attr('data-articleid').toString();\n        if (actualArticles.indexOf(articleid) != -1) {\n          $this.addClass('active');\n        }\n      });\n    }\n  }\n}","$(document).ready(function () {\n  $('.menutrigger').on('click', function() {\n    $('.slide_in_menu').toggleClass('slide_in_menu_open');\n  })\n});","// this part is in Matrix start\n// this part will be in the pain layout of the page\n//\n// var options = new Array();\n// options['key'] = '9400745924';\n// var js_api = new Squiz_Matrix_API(options);\n// var user = 448785 ; //user ID\n// var arrayCategories = [];\n// var toAdd = [];\n//\n//\n// this part is in Matrix end\n\n\n$(document).ready(function () {\n  if ($('.topics').length > 0) {\n\n    //apply active class to subscribed categories\n    getCategories(user);\n\n    // add/remove category on Click\n    $('ul.topics-list .topics-list__item').on('click', function (e) {\n      e.preventDefault();\n      let $this = $(this);\n      $this.toggleClass('active');\n    });\n\n    //submit selections\n    $('.nextButton a').on('click', function(e){\n      e.preventDefault();\n      let $this = $(this);\n      let destination = $this.attr('href');\n      $('ul.topics-list .topics-list__item').each(function () {\n        if ($(this).hasClass('active')) {\n          toAdd.push($(this).data('subscription'));\n        }\n      });\n      setCategories(user, destination);\n    });\n  }\n});\n\n//get metadata and apply active class accordingly\nfunction getCategories(assetId) {\n  js_api.getMetadata({\n    \"asset_id\": assetId,\n    \"dataCallback\": storeToArray\n  });\n  function storeToArray(object) {\n    if(object[\"Selected.Topics\"]  ) {\n      arrayCategories = object[\"Selected.Topics\"].split('; ');\n      $('ul.topics-list .topics-list__item').each(function () {\n        let $this = $(this);\n        let category = $this.data('subscription').toString();\n        if (arrayCategories.indexOf(category) != -1) {\n          $this.addClass('active');\n        }\n      });\n    }\n  }\n}\n\n//acquire lock, save metadata, relase lock\nfunction setCategories(assetId, urlDestination) {\n  js_api.acquireLock({\n    \"asset_id\": assetId,\n    \"dependants_only\":0,\n    \"force_acquire\":true,\n    \"dataCallback\": setAssetMetadata\n  });\n  function setAssetMetadata(object) {\n    console.log('seta metadata. object:');\n    console.log(object);\n    if ( /* object[0][\"warning\"] || */ object[\"errorCode\"] == \"permissionError\") {\n      console.log('An error has occurred, maybe you are offline. please try again later.');\n    }  else {\n      var setStringCategories = toAdd.join('; ');\n      js_api.setMetadata({\n        \"asset_id\":assetId,\n        \"field_id\":448763,\n        \"field_val\": setStringCategories ,\n        \"dataCallback\":function() {\n          releaseLock(assetId);\n        }\n      });\n    }\n  }\n  function releaseLock(assetId) {\n    js_api.releaseLock({\n      \"asset_id\":assetId,\n      \"dataCallback\":redirect\n    });\n  }\n  function redirect() {\n    window.location.href = urlDestination;\n  }\n}"]}